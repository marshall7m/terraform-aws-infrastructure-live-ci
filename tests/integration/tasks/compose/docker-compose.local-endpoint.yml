version: '3.4'
networks:
  ecs-local-network:
    driver: bridge
    ipam:
      config:
      - subnet: 169.254.170.0/24
        gateway: 169.254.170.1
  tests_terraform-aws-infrastructure-live-ci_local:
    external: true
services:
  ecs-local-endpoints:
    image: amazon/amazon-ecs-local-container-endpoints
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    - /usr/bin/docker:/usr/bin/docker
    environment:
    - IAM_ENDPOINT
    - STS_ENDPOINT
    - AWS_REGION
    - AWS_ACCESS_KEY_ID=mock-aws-access-key
    - AWS_SECRET_ACCESS_KEY=mock-aws-secret-key
    networks:
      ecs-local-network:
        ipv4_address: 169.254.170.2
      tests_terraform-aws-infrastructure-live-ci_local:
